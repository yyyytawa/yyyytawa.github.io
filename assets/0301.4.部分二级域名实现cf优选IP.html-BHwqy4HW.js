import{_ as y}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as c,o as s}from"./app-D8SJ3c1v.js";const i={};function n(a,t){return s(),e("div",null,[...t[0]||(t[0]=[c('<p>如题,本文将使用华为云的dns的分地域解析功能实现域名优选cf cdn ip.</p><div class="hint-container caution"><p class="hint-container-title">警告</p><p>cf的用户协议中禁止优选IP,请自行判断相关风险.目前仅测试us.kg域名,其他二级域名理论可用.一级域名据说检查whois的ns故可能无法使用.已测试(二级域名修改1天左右后没出现掉有效状态,一级域名未测试)</p></div><h2 id="准备材料" tabindex="-1"><a class="header-anchor" href="#准备材料"><span>准备材料:</span></a></h2><p>cf账号一枚<br> 一个域名</p><h2 id="开始操作" tabindex="-1"><a class="header-anchor" href="#开始操作"><span>开始操作:</span></a></h2><p>1.先把你的域名转入到cf,具体过程不再说明.<br> 2.趁cf不注意再把域名转入到华为云的dns解析(无法实名的可以用国际版),然后海外NS记录解析到cf的ns就行</p><p>你就会发现cf的活动状态还是有效,这很正常是吧.<br> 但是未来咋样就不知道了,可能是dns缓存的问题.</p><div class="hint-container tip"><p class="hint-container-title">温馨提示</p><p>华为云的根域名ns记录实际上是个空NS记录,也就是<strong>实际上海外还是不能按照cf控制台上的DNS配置来决定最终的解析结果</strong>,你需要在华为云的dns记录里面添加记录才行.</p></div><p>如果开启了cf代理就把华为云解析到的地址指向cf的cdn地址即可.<br> 其他的和正常双向解析一样,这边不再赘述.</p><h2 id="原理刨析" tabindex="-1"><a class="header-anchor" href="#原理刨析"><span>原理刨析:</span></a></h2><p>域名解析出来啥地址不在于NS,而是在于SOA,也就是**SOA决定你的域名解析结果,NS不是决定的.**你的域名解析出来的啥结果只看SOA给出来的解析结果(比如本文中是华为云)<br> 也就是说解析路径应该是这样的(可能有错,欢迎各位大佬指正):<br> 你-&gt;递归DNS服务器-&gt;CF的NS服务器(国外)-&gt;SOA服务器(返回解析结果)</p><p>举个例子:<br> yyyyt.us.kg解析托管在华为云国际版上.如果你在国内查询应该下面的样子:</p><figure><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.us.kg_cn.jpg" alt="dns查询yyyyt.us.kg国内" width="150" height="350" tabindex="0" loading="lazy"><figcaption>国内查询</figcaption></figure><p>国外查询应该是这样的:</p><figure><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.us.kg_global.jpg" alt="dns查询yyyyt.us.kg国外" width="150" height="350" tabindex="0" loading="lazy"><figcaption>国外查询</figcaption></figure><p>发现了没有?外国查询没有SOA记录.</p><p>同样的,我们看一下cloudns的免费二级域名:</p><figure><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.ip-ddns.com.jpg" alt="dns查询cloudns免费二级域名" width="150" height="350" tabindex="0" loading="lazy"><figcaption>dns查询cloudns免费二级域名</figcaption></figure><p>发现没有,SOA记录不是cf那边的.<br> 而正常的一级域名:</p><figure><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.top.jpg" alt="dns查询yyyyt.top" width="150" height="350" tabindex="0" loading="lazy"><figcaption>dns查询yyyyt.top</figcaption></figure><p>而cloudns那边需要双向解析,我这个操作也需要双向解析.<br> 实际上你去itdog ping会发现你在cf那边设置的解析记录不生效.</p><p><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_cf.png" alt="cf记录" loading="lazy"><br><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_huawei.png" alt="华为云记录" loading="lazy"><br><img src="https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_itdog.png" alt="itdog查询" loading="lazy"></p><p>这就是双向解析相关的原因.</p><p>PS: 有人会想问为啥cf那边NS记录托管到别的dns服务商就能按照正常的解析出来了,例如说我的docs.yyyyt.top就是通过子域名NS记录来托管华为云的,这个我猜测应该是cf那边做了特殊处理,所以可以正常托管,而华为云把SOA权限给锁的比较死,而且没有做特殊处理(或许是二级域名的问题),导致海外ns解析到cf后cf上的记录无法生效.我只能猜测到这里了.</p><h2 id="the-end" tabindex="-1"><a class="header-anchor" href="#the-end"><span>The End</span></a></h2>',25)])])}const r=y(i,[["render",n]]),d=JSON.parse('{"path":"/articles/tech/2025/0301.4.%E9%83%A8%E5%88%86%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%AE%9E%E7%8E%B0cf%E4%BC%98%E9%80%89IP.html","title":"4.部分二级域名实现cf优选IP","lang":"zh-CN","frontmatter":{"title":"4.部分二级域名实现cf优选IP","order":-193,"tag":["cf"],"description":"如题,本文将使用华为云的dns的分地域解析功能实现域名优选cf cdn ip. 警告 cf的用户协议中禁止优选IP,请自行判断相关风险.目前仅测试us.kg域名,其他二级域名理论可用.一级域名据说检查whois的ns故可能无法使用.已测试(二级域名修改1天左右后没出现掉有效状态,一级域名未测试) 准备材料: cf账号一枚 一个域名 开始操作: 1.先把...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"4.部分二级域名实现cf优选IP\\",\\"image\\":[\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.us.kg_cn.jpg \\\\\\"国内查询\\\\\\"\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.us.kg_global.jpg \\\\\\"国外查询\\\\\\"\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.ip-ddns.com.jpg\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.top.jpg\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_cf.png\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_huawei.png\\",\\"https://img.yyyyt.top/docs/articles/tech/2025/0301/test.yyyyt.us.kg_itdog.png\\"],\\"dateModified\\":\\"2025-07-28T09:21:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yyyyt\\",\\"url\\":\\"https://docs.yyyyt.top/site/about_me\\"}]}"],["meta",{"property":"og:url","content":"https://docs.yyyyt.top/articles/tech/2025/0301.4.%E9%83%A8%E5%88%86%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D%E5%AE%9E%E7%8E%B0cf%E4%BC%98%E9%80%89IP.html"}],["meta",{"property":"og:site_name","content":"yyyyt的文档站"}],["meta",{"property":"og:title","content":"4.部分二级域名实现cf优选IP"}],["meta",{"property":"og:description","content":"如题,本文将使用华为云的dns的分地域解析功能实现域名优选cf cdn ip. 警告 cf的用户协议中禁止优选IP,请自行判断相关风险.目前仅测试us.kg域名,其他二级域名理论可用.一级域名据说检查whois的ns故可能无法使用.已测试(二级域名修改1天左右后没出现掉有效状态,一级域名未测试) 准备材料: cf账号一枚 一个域名 开始操作: 1.先把..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img.yyyyt.top/docs/articles/tech/2025/0301/dns_yyyyt.us.kg_cn.jpg \\"国内查询\\""}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-28T09:21:08.000Z"}],["meta",{"property":"article:tag","content":"cf"}],["meta",{"property":"article:modified_time","content":"2025-07-28T09:21:08.000Z"}]]},"git":{"createdTime":1740841961000,"updatedTime":1753694468000,"contributors":[{"name":"yyyytawa","username":"yyyytawa","email":"116234899+yyyytawa@users.noreply.github.com","commits":4,"avatar":"https://avatars.githubusercontent.com/yyyytawa?v=4","url":"https://github.com/yyyytawa"}]},"readingTime":{"minutes":2.95,"words":884},"filePathRelative":"articles/tech/2025/0301.4.部分二级域名实现cf优选IP.md","excerpt":"<p>如题,本文将使用华为云的dns的分地域解析功能实现域名优选cf cdn ip.</p>\\n<div class=\\"hint-container caution\\">\\n<p class=\\"hint-container-title\\">警告</p>\\n<p>cf的用户协议中禁止优选IP,请自行判断相关风险.目前仅测试us.kg域名,其他二级域名理论可用.一级域名据说检查whois的ns故可能无法使用.已测试(二级域名修改1天左右后没出现掉有效状态,一级域名未测试)</p>\\n</div>\\n<h2>准备材料:</h2>\\n<p>cf账号一枚<br>\\n一个域名</p>\\n<h2>开始操作:</h2>\\n<p>1.先把你的域名转入到cf,具体过程不再说明.<br>\\n2.趁cf不注意再把域名转入到华为云的dns解析(无法实名的可以用国际版),然后海外NS记录解析到cf的ns就行</p>","autoDesc":true}');export{r as comp,d as data};
